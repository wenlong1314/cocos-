window.__require=function t(e,n,o){function i(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!s&&h)return h(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=n[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({CPAPage:[function(t,e,n){"use strict";cc._RF.push(e,"95822xfIHVIzKBDHI5tnsNX","CPAPage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./Main"),s=t("./CPAShow"),c=t("./CPBAPI"),h=cc._decorator,p=h.ccclass,l=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgDatas=[],e}return o(e,t),e.prototype.init=function(){var t=this;console.log("init CPAPage"),this.cpaPage=this,this.submit=this.node.getChildByName("submit"),this.btn=this.node.getChildByName("btn"),this.time=this.node.getChildByName("time"),this.cpaShow=this.node.getChildByName("cpaShow").getComponent(s.default),this.cpbAPI=new c.default,this.time.getComponent(cc.Label).string="\u5237\u65b0\u4e8e\uff1a"+(new Date).toLocaleString(),this.btn.on(cc.Node.EventType.TOUCH_START,function(e){console.log(t.cpaArray);t.cpaArray.push({}),t.cpaShow.init(t.cpaArray,t.cpaPage,!0)}),this.submit.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u4e0a\u4f20"),t.showSubmit()}),this.updata()},e.prototype.updata=function(){var t=this;console.log("\u66f4\u65b0cpaShow",a.main.chooseGameID),this.time.getComponent(cc.Label).string="\u5237\u65b0\u4e8e\uff1a"+(new Date).toLocaleString(),r.post({op:"getCPANames",game:a.main.chooseGameID},function(e){t.cpaName=e[0],r.get({url:r._cdn2+a.main.chooseGameID+"/web/"+t.cpaName+"?"+(new Date).getTime()},function(e){t.myDecodeJSON(e),t.reqCpaData=e,console.log(t.reqCpaData),t.cpaShow.init(t.cpaArray,t.cpaPage)})})},e.prototype.myDecodeJSON=function(t){this.cpaArray=[];var e=t.data.addturnlist;for(var n in e){var o={};o.name=e[n].otherName,o.appId=e[n].otherAppId,o.path=e[n].otherIndexPath,o.imgUrl=e[n].otherIconUrl,t.data.gameIcon1&&t.data.gameIcon1.itemlist.indexOf(n)>-1?o.cpa1=!0:o.cpa1=!1,t.data.gameIcon2&&t.data.gameIcon2.itemlist.indexOf(n)>-1?o.cpa2=!0:o.cpa2=!1,t.data.hutuiqiang&&t.data.hutuiqiang.itemlist.indexOf(n)>-1?o.hutuiqiang=!0:o.hutuiqiang=!1,t["\u82f9\u679c\u4e0d\u663e\u793a"]&&t["\u82f9\u679c\u4e0d\u663e\u793a"].indexOf(o.appId)>-1?o.IOS=!1:o.IOS=!0,this.cpaArray[Number(n)]=o}console.log("myDecodeJSON"),console.log(this.cpaArray)},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.showSubmit=function(){for(var t in this.cpaArray){var e="",n=this.cpaArray[t];if(e+=n.imgUrl?"":" \u56fe\u7247",e+=n.name?"":" \u6e38\u620f\u540d",e+=n.appId?"":" appId",null!==(e+=n.path?"":" \u8def\u5f84")&&void 0!==e&&""!==e)return void alert("\u7b2c"+t+"\u9879\u76ee\u7684"+e+"\u672a\u4e0a\u4f20")}this.decodeData()},e.prototype.decodeData=function(){var t={},e=[],n=[],o=[],i=[];for(var r in this.cpbNames=[],this.reqCpaData.data.addturnlist={},this.cpaArray){var a=this.cpaArray[r];a.urlBase64&&this.imgDatas.push([a.imgUrl,a.urlBase64]),t[r]={},t[r].otherBannerUrl="",t[r].otherIconUrl=a.imgUrl,t[r].otherIndexPath=a.path,t[r].otherAppId=a.appId,t[r].otherBanner2Url="",t[r].otherInsertUrl="",t[r].otherName=a.name,this.cpbNames.push(a.name),a.cpa1&&e.push(r),a.cpa2&&n.push(r),a.hutuiqiang&&o.push(r),a.IOS||i.push(a.appId)}console.log(t),this.reqCpaData.data.addturnlist=t,e.length>0&&(this.reqCpaData.data.gameIcon1.itemlist=e),n.length>0&&(this.reqCpaData.data.gameIcon2.itemlist=n),o.length>0&&(this.reqCpaData.data.hutuiqiang.itemlist=o),i.length>0&&(this.reqCpaData["\u82f9\u679c\u4e0d\u663e\u793a"]=i),console.log("\u5f85\u4e0a\u4f20\u6570\u636e"),console.log(this.cpaArray),this.submitCPB(),this.submitCPA()},e.prototype.submitCPA=function(){console.log("\u586b\u5199\u5b8c\u6bd5\u5f00\u59cb\u4e0a\u4f20"),r.post({op:"setCPA",game:a.main.chooseGameID,cpaName:this.cpaName.split(/\.(\w+)/i)[0],cpa:JSON.stringify(this.reqCpaData),imgDatas:JSON.stringify(this.imgDatas)},function(t){console.log(t),t.success?alert("\u6210\u529f"):alert("\u5931\u8d25")})},e.prototype.submitCPB=function(){console.log(this.cpbNames),this.cpbAPI.cpbSubmit(this.cpbNames)},e=i([p],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./CPAShow":"CPAShow","./CPBAPI":"CPBAPI","./Main":"Main","./global":"global"}],CPAShow:[function(t,e,n){"use strict";cc._RF.push(e,"9ec1bH07hNNLYKDJt72hRC+","CPAShow");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./prefabs"),s=t("./CPBAPI"),c=cc._decorator,h=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e,n){var o=this;console.log("init CPAShow"),this.cpaPage=e,this.view=this.node.getChildByName("view"),this.content=this.view.getChildByName("content"),this.cpbAPI=new s.default,this.content.removeAllChildren(),this.content.height=160*(t.length-1),this.initInputHTML(),console.log(t);var i,r=function(r){var s=a.prefabs.instantiate("CPAItem"),h=s.getChildByName("img").getComponent(cc.Sprite),p=s.getChildByName("input1").getComponent(cc.EditBox),l=s.getChildByName("input2").getComponent(cc.EditBox),u=s.getChildByName("input3").getComponent(cc.EditBox),g=s.getChildByName("checkbox1").getComponent(cc.Toggle),d=s.getChildByName("checkbox2").getComponent(cc.Toggle),f=s.getChildByName("checkbox3").getComponent(cc.Toggle),m=s.getChildByName("checkbox4").getComponent(cc.Toggle),y=s.getChildByName("btn");if(t[r].urlBase64)console.log("\u65b0\u589e\u7684\u6570\u636e");else if(t[r].imgUrl){var b=c;i="https://cdn-tiny.qimiaosenlin.com/cdn/cpa/"+t[r].imgUrl,cc.loader.load(i,function(t,e){h.spriteFrame=new cc.SpriteFrame(e),b.cpbAPI.drewImg(e._image,parseInt(r)-1,e.width,e.height)})}p.string=t[r].name||"",l.string=t[r].appId||"",u.string=t[r].path||"",g.isChecked=t[r].cpa1,d.isChecked=t[r].cpa2,f.isChecked=t[r].hutuiqiang,m.isChecked=t[r].IOS,p.node.on("editing-did-ended",function(e){p.string=p.string.replace(/(^\s*)|(\s*$)/g,""),t[r].name=p.string}),l.node.on("editing-did-ended",function(e){l.string=l.string.replace(/(^\s*)|(\s*$)/g,""),t[r].appId=l.string}),u.node.on("editing-did-ended",function(e){u.string=u.string.replace(/(^\s*)|(\s*$)/g,""),t[r].path=u.string}),g.node.on("toggle",function(){t[r].cpa1=!t[r].cpa1},c),d.node.on("toggle",function(){t[r].cpa2=!t[r].cpa2},c),f.node.on("toggle",function(){t[r].hutuiqiang=!t[r].hutuiqiang},c),m.node.on("toggle",function(){t[r].IOS=!t[r].IOS},c),s.y=160*-(Number(r)-1),c.content.addChild(s),h.node.on(cc.Node.EventType.TOUCH_START,function(){o.currImg=h,window.wx?(console.log("\u8c03\u53d6\u5fae\u4fe1\u63a5\u53e3"),wx.chooseImage({success:function(t){console.log("\u6210\u529f")},fail:function(t){console.log("\u5931\u8d25")}})):o.imgInput.click()}),y.on(cc.Node.EventType.TOUCH_START,function(){t.splice(Number(r),1),console.log(t),o.init(t,e)}),n&&c.node.getComponent(cc.ScrollView).scrollToBottom(.1)},c=this;for(var h in t)r(h);this.show()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.base64Img=function(t,e){console.log("\u51c6\u5907\u8f6c\u6362");var n=this.cpaPage.cpaArray[this.currImg.node.parent.getSiblingIndex()+1],o=new Uint8Array(t);n.urlBase64=btoa(String.fromCharCode.apply(null,o));var i=(1e8+e.size).toString().substr(1)+(4294967296+r.myCRC32(o)).toString(16).toUpperCase().substr(1)+e.name.match(/(\.\w+)/i)[0];n.imgUrl=i,this.base64ShowImg(n.urlBase64,i)},e.prototype.base64ShowImg=function(t,e,n){console.log(e);var o=this,i="data:image/"+e.match(/\.(\w+)/i)[1]+";base64,"+t,r=new Image;r.src=i;var a=new cc.Texture2D;a.initWithElement(r),a.on("load",function t(e){if(console.log(e),a.width<=150&&a.height<=150)if(n)n.spriteFrame=new cc.SpriteFrame(a);else{o.currImg.spriteFrame=new cc.SpriteFrame(a);var i=o.currImg.node.parent.getSiblingIndex();o.cpbAPI.drewImg(r,i,a.width,a.height,!0)}else alert("\u56fe\u7247\u5bbd\u9ad8\u4e0d\u80fd\u8d85\u8fc7150*150");a.off("load",t)}),a.handleLoadedTexture()},e.prototype.initInputHTML=function(){var t=this,e=this;document.getElementById("fileInput")?this.imgInput=document.getElementById("fileInput"):(this.imgInput=document.createElement("input"),this.imgInput.type="file",this.imgInput.accept="*.txt",this.imgInput.id="fileInput",document.body.appendChild(this.imgInput),this.imgInput.addEventListener("change",function(){var n=t.imgInput.files[0];if(n){var o=new FileReader;o.readAsArrayBuffer(n),o.onload=function(t){console.log("\u4e0b\u8f7d\u6210\u529f"),e.base64Img(this.result,n)}}}))},e=i([h],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./CPBAPI":"CPBAPI","./global":"global","./prefabs":"prefabs"}],CPBAPI:[function(t,e,n){"use strict";cc._RF.push(e,"f7db7dgQdhLdZ2Ob/TqSc6t","CPBAPI");var o=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./global"),r=cc._decorator,a=r.ccclass,s=(r.property,function(){function t(){this.NameRectMap=new Map,this.ImgRectMap=new Map}return t.prototype.cpbSubmit=function(t,e){this.drewTxt(t),console.log(this.ImgRectMap),console.log(this.NameRectMap);var n=this.postTinyImg(this.reqAllData).then(function(){console.log("\u63d0\u4ea4cpb\u56fe\u96c6\u6210\u529f")},function(){alert("\u63d0\u4ea4cpb\u56fe\u96c6\u5931\u8d25")}),o=this.postCPBCode(this.reqAllData).then(function(){console.log("\u63d0\u4ea4cpb\u6570\u636e\u6210\u529f")},function(){alert("\u63d0\u4ea4cpb\u6570\u636e\u5931\u8d25")});Promise.all([n,o]).then(function(t){console.log("\u63d0\u4ea4cpb\u6210\u529f")}).catch(function(){return alert("\u63d0\u4ea4cpb\u5931\u8d25")})},t.prototype.drewTxt=function(t){var e=this.getDrewCanvas(),n=e.getContext("2d");for(var o in n.font="24px \u5fae\u8f6f\u96c5\u9ed1",n.fillStyle="#4774CB",this.NameRectMap=new Map,t)if(!this.NameRectMap.has(t[o])){var i=30*parseInt(o);n.fillText(t[o],755,i+26);var r=n.measureText(t[o]);this.NameRectMap.set(t[o],[755,i,Math.round(r.width),Math.round(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)])}var a=e.toDataURL().replace(/data:image\/.{0,9};base64,/i,"");console.log("\u66ff\u6362\u540e\uff1a"),this.reqAllData={cpbAtlas:a,cpbAtlasName:"cpbTmp"}},t.prototype.postTinyImg=function(t){return new Promise(function(e,n){$.post(i.gameRoot+"tinypng.php",t,function(t){t?e(t):n&&n(t)})})},t.prototype.postCPBCode=function(t){return new Promise(function(t,e){})},t.prototype.getDrewCanvas=function(){if(document.getElementById("drewCanvas"));else{var t=document.createElement("canvas");document.body.appendChild(t),t.width=1024,t.height=1024,t.style.backgroundColor="#FF0000",t.id="drewCanvas"}return document.getElementById("drewCanvas")},t.prototype.drewImg=function(t,e,n,o,i){var r=this.getDrewCanvas(),a=r.getContext("2d"),s=Math.floor(e/6),c=e%6;i&&a.clearRect(150*s,150*c,150,150),a.drawImage(t,0,0,n,o,150*s,150*c,n,o),this.ImgRectMap.set(e,[150*s,150*c,n,o]);var h=r.toDataURL();i&&console.log(h),console.log("\u8fd9\u662f\u7b2c"+e+"\u4e2a"+s+"\u884c"+c)},t=o([a],t)}());n.default=s,cc._RF.pop()},{"./global":"global"}],ChooseBox:[function(t,e,n){"use strict";cc._RF.push(e,"98bc3cM25FLEbNNFfsaPQMh","ChooseBox");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./prefabs"),a=t("./Main"),s=cc._decorator,c=s.ccclass,h=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e){var n=this;console.log("init ChooseBox"),this.node.removeAllChildren();var o=function(o){var s=r.prefabs.instantiate("ChooseBoxItem");s.getChildByName("tab1").getChildByName("label").getComponent(cc.Label).string=t[o],s.y=60*-o-60,i.node.addChild(s),s.on(cc.Node.EventType.TOUCH_START,function(){e.mengceng.active=!1,e.btn.getChildByName("label").getComponent(cc.Label).string=t[o],a.main.gameNames.has(t[o])&&(console.log("zhans"),a.main.chooseGameID=a.main.gameNames.get(t[o]),a.main.gameUpdata()),n.hide()})},i=this;for(var s in t)o(s);this.show()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=i([c],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Main":"Main","./prefabs":"prefabs"}],ChooseGame:[function(t,e,n){"use strict";cc._RF.push(e,"6d416/vS9tKWK2RG4aNPWNG","ChooseGame");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./ChooseBox"),a=t("./Main"),s=cc._decorator,c=s.ccclass,h=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;console.log("init ChooseGame"),this.chooseGame=this,this.btn=this.node.getChildByName("btn"),this.mengceng=this.node.getChildByName("mengceng"),this.chooseBox=this.node.getChildByName("chooseBox").getComponent(r.default),this.btn.getChildByName("label").getComponent(cc.Label).string=a.main.chooseGameName,this.btn.on(cc.Node.EventType.TOUCH_START,function(e){t.mengceng.active=!0,t.chooseBox.node.active=!0,t.chooseBox.init(a.main.gamesNameShow,t.chooseGame)}),this.mengceng.on(cc.Node.EventType.TOUCH_START,function(e){t.mengceng.active=!1,t.chooseBox.node.active=!1}),this.show()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=i([c],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./ChooseBox":"ChooseBox","./Main":"Main"}],CodeShow:[function(t,e,n){"use strict";cc._RF.push(e,"71d7eOYAAFHbJHC5gBYrCXC","CodeShow");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./prefabs"),s=t("./Main"),c=cc._decorator,h=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e){var n=this;console.log("init CodeShow"),this.view=this.node.getChildByName("view"),this.content=this.view.getChildByName("content"),this.content.removeAllChildren(),this.content.height=60*t.length;var o=function(o){var c,h=a.prefabs.instantiate("ScrollViewItem"),p=h.getChildByName("txt1").getComponent(cc.EditBox),l=h.getChildByName("txt2").getComponent(cc.Label),u=h.getChildByName("txt3").getComponent(cc.Label),g=h.getChildByName("btn");p.string=t[o].code+"",l.string=t[o].info,u.string=t[o].times+"",h.y=60*-o,i.content.addChild(h),g.on(cc.Node.EventType.TOUCH_START,function(){console.log("\u5220\u9664"),t.splice(Number.parseInt(o),1),console.log(t),n.init(t,e),r.post({op:"removeCode",game:s.main.chooseGameID,code:t[o].code+""},function(t){t.success?alert("\u6210\u529f"):alert("\u5931\u8d25")})}),p.node.on("editing-did-began",function(t){console.log("\u5f00\u59cb"),c=p.string}),p.node.on("editing-did-ended",function(t){console.log("\u7ed3\u675f"),p.string=c})},i=this;for(var c in t)o(c);this.show()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e=i([h],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./Main":"Main","./global":"global","./prefabs":"prefabs"}],ConfigPage:[function(t,e,n){"use strict";cc._RF.push(e,"43de5apWG5OfYBqBsavLrOg","ConfigPage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./Main"),s=cc._decorator,c=s.ccclass,h=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;console.log("init ConfigPage"),this.\u7cfb\u7edf\u914d\u7f6etxt=this.node.getChildByName("\u7cfb\u7edf\u914d\u7f6etxt").getComponent(cc.Label),this.time=this.node.getChildByName("time").getComponent(cc.Label),this.a=this.node.getChildByName("\u603b\u5f00\u5173"),this.\u8bef\u89e6\u5173=this.node.getChildByName("\u8bef\u89e6\u5f00\u5173"),this.\u5206\u4eab\u5173=this.node.getChildByName("\u5206\u4eab\u5f00\u5173"),this.cpa\u5173=this.node.getChildByName("cpa\u5f00\u5173"),this.submit=this.node.getChildByName("submit"),this.input1=this.node.getChildByName("input1").getComponent(cc.EditBox),this.input2=this.node.getChildByName("input2").getComponent(cc.EditBox),this.input3=this.node.getChildByName("input3").getComponent(cc.EditBox),this.input4=this.node.getChildByName("input4").getComponent(cc.EditBox),this.input5=this.node.getChildByName("input5").getComponent(cc.EditBox),this.input6=this.node.getChildByName("input6").getComponent(cc.EditBox),this.nodes=["a","\u8bef\u89e6\u5173","\u5206\u4eab\u5173","cpa\u5173"],this.inputs=[this.input1,this.input2,this.input3,this.input4,this.input5,this.input6],this.settingsInput=["\u5fae\u4fe1\u5408\u6210\u70b9\u51fb\u5b8c\u6bd5\u51fa\u73b0Banner","\u6e38\u620f\u5de6\u4e0b\u89d2Banner\u663e\u793a\u6982\u7387","CPA\u9ed1\u540d\u5355","\u8bef\u89e6\u767d\u540d\u5355","\u8bef\u89e6\u767d\u540d\u53551","\u8bef\u89e6\u767d\u540d\u53552"],this.updata(),this.submit.children[0].on(cc.Node.EventType.TOUCH_START,function(t){a.main.settings.\u7cfb\u7edf\u914d\u7f6e\u7248\u672c=a.main.getTime(),console.log(a.main.settings),r.post({op:"setSettings",game:a.main.chooseGameID,code:JSON.stringify(a.main.settings)},function(t){alert("\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u6210\u529f\uff01")})});for(var e=-1,n=function(n){e++;var o="";n.index=e,n.node.on("editing-did-began",function(t){o=n.string}),n.node.on("editing-did-ended",function(){if(n.string!=o){t.submit.children[1].active=!1,t.submit.children[0].active=!0,t.time.string="\u4fee\u6539\u4e0e\uff1a"+(new Date).toLocaleString();var e=n.string.replace(/[^\d,,\uff0c\u3002.;\n\t-]/g,"").split(/[,\uff0c\u3002.;\n\t]/).filter(function(t){if(t)return t});a.main.settings[""+t.settingsInput[n.index]]=e,n.string=e.toString(),console.log("\u4fee\u6539\u503c")}})},o=0,i=this.inputs;o<i.length;o++){n(i[o])}},e.prototype.changeNode=function(t){this[""+t].children[1].active=!this[""+t].children[1].active,this[""+t].children[0].active=!this[""+t].children[0].active,a.main.settings[""+t]=!a.main.settings[""+t],this.submit.children[1].active=!1,this.submit.children[0].active=!0,this.time.string="\u4fee\u6539\u4e0e\uff1a"+(new Date).toLocaleString()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.updata=function(){var t=this;console.log("\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9875\u9762",a.main.chooseGameID),this.\u7cfb\u7edf\u914d\u7f6etxt.string="\u7cfb\u7edf\u914d\u7f6e\u7248\u672c\uff1a"+a.main.settings.\u7cfb\u7edf\u914d\u7f6e\u7248\u672c,this.input1.string=(a.main.settings.\u5fae\u4fe1\u5408\u6210\u70b9\u51fb\u5b8c\u6bd5\u51fa\u73b0Banner+""||0)+"",this.input2.string=(a.main.settings.\u6e38\u620f\u5de6\u4e0b\u89d2Banner\u663e\u793a\u6982\u7387||0)+"",this.input3.string=(a.main.settings.CPA\u9ed1\u540d\u5355||0)+"",this.input4.string=(a.main.settings.\u8bef\u89e6\u767d\u540d\u5355||0)+"",this.input5.string=(a.main.settings.\u8bef\u89e6\u767d\u540d\u53551||0)+"",this.input6.string=(a.main.settings.\u8bef\u89e6\u767d\u540d\u53552||0)+"";for(var e=function(e){n[""+e].children[1].active=a.main.settings[""+e],n[""+e].children[0].active=!a.main.settings[""+e],n[""+e].on(cc.Node.EventType.TOUCH_START,function(n){t.changeNode(e)})},n=this,o=0,i=this.nodes;o<i.length;o++){e(i[o])}},e=i([c],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Main":"Main","./global":"global"}],GMPage:[function(t,e,n){"use strict";cc._RF.push(e,"790709ThfxP1pN7/Gbk9EcH","GMPage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./ChooseBox"),s=t("./CodeShow"),c=t("./Main"),h=cc._decorator,p=h.ccclass,l=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;console.log("init GMPage"),this.gmPage=this,this.submit=this.node.getChildByName("submit"),this.btn=this.node.getChildByName("btn"),this.mengceng=this.node.getChildByName("mengceng"),this.chooseBox=this.node.getChildByName("chooseBox").getComponent(a.default),this.input1=this.node.getChildByName("input1").getComponent(cc.EditBox),this.input2=this.node.getChildByName("input2").getComponent(cc.EditBox),this.codeShow=this.node.getChildByName("codeShow").getComponent(s.default),this.arrs=["+\u91d1\u5e01","+\u94bb\u77f3","+\u4f53\u529b","+\u89c6\u9891","+\u63d0\u793a"],this.inputs=[this.input1,this.input2],this.mengceng.on(cc.Node.EventType.TOUCH_START,function(e){t.chooseBox.hide(),t.mengceng.active=!1}),this.btn.on(cc.Node.EventType.TOUCH_START,function(e){t.mengceng.active=!0,t.chooseBox.node.active=!0,t.chooseBox.init(t.arrs,t.gmPage)}),this.submit.children[0].on(cc.Node.EventType.TOUCH_START,function(e){r.post({op:"addCode",game:c.main.chooseGameID,info:t.btn.getChildByName("label").getComponent(cc.Label).string+t.input1.string,times:t.input2.string},function(e){t.updata()})});for(var e=function(e){0;var n="";e.node.on("editing-did-began",function(t){n=e.string}),e.node.on("editing-did-ended",function(o){e.string!=n&&t.showSubmit()})},n=0,o=this.inputs;n<o.length;n++){e(o[n])}this.updata()},e.prototype.updata=function(){var t=this;console.log("getCodes:",c.main.chooseGameID),r.post({op:"getCodes",game:c.main.chooseGameID},function(e){t.codeArrays=e,console.log(e),t.codeShow.init(t.codeArrays,t.gmPage)})},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.showSubmit=function(){this.input1.string&&this.input2.string?(this.submit.children[1].active=!1,this.submit.children[0].active=!0):(this.submit.children[1].active=!0,this.submit.children[0].active=!1)},e=i([p],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./ChooseBox":"ChooseBox","./CodeShow":"CodeShow","./Main":"Main","./global":"global"}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Main");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("./global"),c=t("./ConfigPage"),h=t("./removeStorage"),p=t("./GMPage"),l=t("./prefabs"),u=t("./ChooseGame"),g=t("./CPAPage"),d=t("./SharePage"),f=cc._decorator,m=f.ccclass,y=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameNames2={"\u5929\u5929\u70b8\u98de\u673a":"plane"},e.settingFlag=!1,e.prefabsFlag=!1,e}return o(e,t),e.prototype.onLoad=function(){return r(this,void 0,Promise,function(){var t,e,o,i,r=this;return a(this,function(a){switch(n.main=this,console.log("init main"),window.main=this,window.company||(console.log("debugger"),company=""),this.tabs=this.node.getChildByName("tabs").children,this.configPage=this.node.getChildByName("pages").getChildByName("configPage").getComponent(c.default),this.removeStorage=this.node.getChildByName("pages").getChildByName("removeStorage").getComponent(h.default),this.gmPage=this.node.getChildByName("pages").getChildByName("GMPage").getComponent(p.default),this.cpaPage=this.node.getChildByName("pages").getChildByName("CPAPage").getComponent(g.default),this.sharePage=this.node.getChildByName("pages").getChildByName("SharePage").getComponent(d.default),this.chooseGame=this.node.getChildByName("chooseGame").getComponent(u.default),this.pages=["configPage","gmPage","removeStorage","cpaPage","sharePage"],console.log("company="+company),company){case"\u68a6\u5609":this.chooseGameName="\u706b\u67f4\u4eba\u51b2\u7a81",this.gamesNameShow=["\u706b\u67f4\u4eba\u51b2\u7a81","\u602a\u7269\u5de5\u53822","\u5c04\u4e86\u4e2a\u7bad"],this.gameNames=new Map([["\u706b\u67f4\u4eba\u51b2\u7a81","sword"],["\u602a\u7269\u5de5\u53822","rush2"],["\u5c04\u4e86\u4e2a\u7bad","sword3"]]);break;case"\u96f7\u9706":this.chooseGameName="\u706b\u67f4\u4eba\u4f60\u7785\u5565",this.gamesNameShow=["\u706b\u67f4\u4eba\u4f60\u7785\u5565","\u6211\u7279\u80fd\u800d\u5251","\u4e27\u5c38\u5e72\u4ed7"],this.gameNames=new Map([["\u706b\u67f4\u4eba\u4f60\u7785\u5565","sword2"],["\u6211\u7279\u80fd\u800d\u5251","fight"],["\u4e27\u5c38\u5e72\u4ed7","zombie"]]);break;case"\u5947\u5999":this.chooseGameName="\u4e3b\u516c\u8d3c\u6709\u94b1",this.gamesNameShow=["\u4e3b\u516c\u8d3c\u6709\u94b1","\u706b\u67f4\u4eba\u51b2\u7a81","\u706b\u67f4\u4eba\u4f60\u7785\u5565","\u6570\u5b57\u4e4b\u57ce","\u602a\u7269\u51b2\u7a81","\u602a\u7269\u5de5\u53822","\u5929\u5929\u4e0a\u697c\u68af","\u6211\u5f00\u5766\u514b\u8d3c6","\u5c04\u4e86\u4e2a\u7bad","\u6211\u7279\u80fd\u800d\u5251","\u4e27\u5c38\u5e72\u4ed7","\u5929\u5929\u70b8\u98de\u673a"],this.gameNames=new Map([["\u4e3b\u516c\u8d3c\u6709\u94b1","push"],["\u706b\u67f4\u4eba\u51b2\u7a81","sword"],["\u706b\u67f4\u4eba\u4f60\u7785\u5565","sword2"],["\u6570\u5b57\u4e4b\u57ce","sudoku"],["\u602a\u7269\u51b2\u7a81","rush2sword"],["\u602a\u7269\u5de5\u53822","rush2"],["\u5929\u5929\u4e0a\u697c\u68af","climb"],["\u6211\u5f00\u5766\u514b\u8d3c6","tank"],["\u5c04\u4e86\u4e2a\u7bad","sword3"],["\u6211\u7279\u80fd\u800d\u5251","fight"],["\u4e27\u5c38\u5e72\u4ed7","zombie"],["\u5929\u5929\u70b8\u98de\u673a","plane"]]);break;default:this.chooseGameName="\u4e3b\u516c\u8d3c\u6709\u94b1",this.gamesNameShow=["\u4e3b\u516c\u8d3c\u6709\u94b1"],this.gameNames=new Map([["\u4e3b\u516c\u8d3c\u6709\u94b1","push"]])}for(this.chooseGameID=this.gameNames.get(this.chooseGameName),t=0,e=this.tabs;t<e.length;t++)e[t].on(cc.Node.EventType.TOUCH_START,function(t){r.tab(r.tabs.indexOf(t.target))});return o=this.prefabsLoad().then(function(){console.log("\u4efb\u52a11\u6210\u529f")}),i=this.getSetting().then(function(){console.log("\u4efb\u52a12\u6210\u529f")}),Promise.all([o,i]).then(function(){console.log("\u4efb\u52a1\u5b8c\u6210"),r.pageInit()}),[2]})})},e.prototype.pageInit=function(){for(var t in this.chooseGame.init(),this.pages)this[this.pages[t]].init();this.tab(0)},e.prototype.prefabsLoad=function(){return new Promise(function(t,e){l.prefabs.init(function(){t()})})},e.prototype.getSetting=function(){var t=this;return new Promise(function(e,n){s.get({url:s._cdn2+t.chooseGameID+"/web/settings.json?"+(new Date).getTime()},function(n){t.settings=n,e()})})},e.prototype.gameUpdata=function(){var t=this;console.log("settings:",this.chooseGameID),s.get({url:s._cdn2+this.chooseGameID+"/web/settings.json?"+(new Date).getTime()},function(e){for(var o in t.settings=e,t.pages)t[t.pages[o]].updata();t.tab(n.main.currPageIndex)})},e.prototype.syncAdd=function(t,e,n,o){return r(this,void 0,Promise,function(){return a(this,function(i){return setTimeout(function(){o(t,e)},n),[2]})})},e.prototype.getTime=function(){var t=new Date;return t.getUTCFullYear()+(100+(t.getMonth()+1)).toString().substring(1)+(100+t.getDay()).toString().substring(1)+(100+t.getHours()).toString().substring(1)+(100+t.getMinutes()).toString().substring(1)+(100+t.getSeconds()).toString().substring(1)},e.prototype.tab=function(t){for(var e=-1,o=0,i=this.tabs;o<i.length;o++){var r=i[o];++e==t?(r.children[0].active=!1,r.children[1].active=!0,""!=this.pages[e]&&this[this.pages[e]].show(),n.main.currPageIndex=t):(r.children[0].active=!0,r.children[1].active=!1,""!=this.pages[e]&&this[this.pages[e]].hide())}},e=i([m],e)}(cc.Component));n.default=y,cc._RF.pop()},{"./CPAPage":"CPAPage","./ChooseGame":"ChooseGame","./ConfigPage":"ConfigPage","./GMPage":"GMPage","./SharePage":"SharePage","./global":"global","./prefabs":"prefabs","./removeStorage":"removeStorage"}],Settings:[function(t,e,n){"use strict";cc._RF.push(e,"5cdc4C3HcBOk5HS28xYIMwJ","Settings"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],SharePage:[function(t,e,n){"use strict";cc._RF.push(e,"0b626EAbRVNBrYso5zPCepy","SharePage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./Main"),s=t("./ShareShow"),c=cc._decorator,h=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgDatas=[],e.shareDatas=[],e}return o(e,t),e.prototype.init=function(){var t=this;console.log("init SharePage"),this.sharePage=this,this.submit=this.node.getChildByName("submit"),this.btn=this.node.getChildByName("btn"),this.time=this.node.getChildByName("time"),this.shareShow=this.node.getChildByName("shareShow").getComponent(s.default),this.time.getComponent(cc.Label).string="\u5237\u65b0\u4e8e\uff1a"+(new Date).toLocaleString(),this.btn.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u65b0\u589e\u4e00\u4e2a\u6846");t.shareArray.push({}),t.shareShow.init(t.shareArray,t.sharePage,!0)}),this.submit.on(cc.Node.EventType.TOUCH_START,function(e){console.log("\u4e0a\u4f20"),t.showSubmit()}),this.updata()},e.prototype.updata=function(){console.log("\u66f4\u65b0shareShow",a.main.chooseGameID),this.shareArray=a.main.settings.\u5206\u4eab\u4eecb,this.shareShow.init(this.shareArray,this.sharePage)},e.prototype.show=function(){this.time.getComponent(cc.Label).string="\u5237\u65b0\u4e8e\uff1a"+(new Date).toLocaleString(),this.updata(),this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.showSubmit=function(){for(var t in this.shareArray){var e="",n=this.shareArray[t];if(e+=n.imageUrl?"":" \u56fe\u7247",e+=n.title?"":" \u63cf\u8ff0",null!==(e+=n.query?"":" id")&&void 0!==e&&""!==e)return void alert("\u7b2c"+t+"\u9879\u76ee\u7684"+e+"\u672a\u4e0a\u4f20")}this.decodeData()},e.prototype.decodeData=function(){for(var t in this.shareDatas=[],this.shareArray){var e={},n=this.shareArray[t];n.urlBase64&&this.imgDatas.push([n.imageUrl,n.urlBase64]),e.rate=1,e.query=this.shareArray[t].query,e.title=this.shareArray[t].title,e.imageUrl=this.shareArray[t].imageUrl.indexOf("https:")>-1?this.shareArray[t].imageUrl:"https://cdn-tiny.qimiaosenlin.com/cdn/share/"+this.shareArray[t].imageUrl,this.shareDatas.push(e)}a.main.settings.\u5206\u4eab\u4eecb=this.shareDatas,a.main.settings.\u7cfb\u7edf\u914d\u7f6e\u7248\u672c=a.main.getTime(),this.submitCPA()},e.prototype.submitCPA=function(){console.log("\u586b\u5199\u5b8c\u6bd5\u5f00\u59cb\u4e0a\u4f20"),r.post({op:"setShares",game:a.main.chooseGameID,code:JSON.stringify(a.main.settings),imgDatas:JSON.stringify(this.imgDatas)},function(t){console.log(t),alert("\u63d0\u4ea4\u6210\u529f")})},e=i([h],e)}(cc.Component));n.default=p,cc._RF.pop()},{"./Main":"Main","./ShareShow":"ShareShow","./global":"global"}],ShareShow:[function(t,e,n){"use strict";cc._RF.push(e,"90b0aQh4yhJHYNWt1o8z+cM","ShareShow");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./prefabs"),s=cc._decorator,c=s.ccclass,h=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(t,e,n){var o=this;console.log("init ShareShow"),this.sharePage=e,this.view=this.node.getChildByName("view"),this.content=this.view.getChildByName("content"),this.content.removeAllChildren(),this.content.height=160*t.length,this.initInputHTML();var i,r=function(n){var r=a.prefabs.instantiate("ShareItem"),c=r.getChildByName("img").getComponent(cc.Sprite),h=r.getChildByName("input1").getComponent(cc.EditBox),p=r.getChildByName("input2").getComponent(cc.EditBox),l=r.getChildByName("btn");t[n].urlBase64?s.base64ShowImg(t[n].urlBase64,t[n].imageUrl,c):t[n].imageUrl&&(i=t[n].imageUrl,cc.loader.load(i,function(t,e){c.spriteFrame=new cc.SpriteFrame(e)})),h.string=t[n].query.replace("id=","")||"",p.string=t[n].title||"",h.node.on("editing-did-ended",function(e){h.string=h.string.replace(/(^\s*)|(\s*$)/g,""),t[n].query="id="+h.string}),p.node.on("editing-did-ended",function(e){p.string=p.string.replace(/(^\s*)|(\s*$)/g,""),t[n].title=p.string}),r.y=160*-Number(n),s.content.addChild(r),c.node.on(cc.Node.EventType.TOUCH_START,function(){o.currImg=c,window.wx?(console.log("\u8c03\u53d6\u5fae\u4fe1\u63a5\u53e3"),wx.chooseImage({success:function(t){console.log("\u6210\u529f")},fail:function(t){console.log("\u5931\u8d25")}})):o.imgInput.click()}),l.on(cc.Node.EventType.TOUCH_START,function(){t.splice(Number(n),1),console.log(t),o.init(t,e)})},s=this;for(var c in t)r(c);this.show()},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.base64Img=function(t,e){if(this.currImg){var n=this.sharePage.shareArray[this.currImg.node.parent.getSiblingIndex()],o=new Uint8Array(t);n.urlBase64=btoa(String.fromCharCode.apply(null,o));var i=(1e8+e.size).toString().substr(1)+(4294967296+r.myCRC32(o)).toString(16).toUpperCase().substr(1)+e.name.match(/(\.\w+)/i)[0];n.imageUrl=i,this.base64ShowImg(n.urlBase64,i)}},e.prototype.base64ShowImg=function(t,e,n){var o=this,i="data:image/"+e.match(/\.(\w+)/i)[1]+";base64,"+t,r=new Image;r.src=i;var a=new cc.Texture2D;a.initWithElement(r),a.on("load",function t(e){console.log(e),a.width<=150&&a.height<=150?n?n.spriteFrame=new cc.SpriteFrame(a):o.currImg.spriteFrame=new cc.SpriteFrame(a):alert("\u56fe\u7247\u5bbd\u9ad8\u4e0d\u80fd\u8d85\u8fc7150*150"),a.off("load",t)}),a.handleLoadedTexture()},e.prototype.initInputHTML=function(){var t=this,e=this;document.getElementById("fileInput")?this.imgInput=document.getElementById("fileInput1"):(this.imgInput=document.createElement("input"),this.imgInput.type="file",this.imgInput.accept="*.txt",this.imgInput.id="fileInput1",document.body.appendChild(this.imgInput),this.imgInput.addEventListener("change",function(){var n=t.imgInput.files[0];if(n){var o=new FileReader;o.readAsArrayBuffer(n),o.onload=function(t){console.log("\u4e0b\u8f7d\u6210\u529f"),e.base64Img(this.result,n)}}}))},e=i([c],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./global":"global","./prefabs":"prefabs"}],global:[function(t,e,n){"use strict";cc._RF.push(e,"2b01538Nn5MeYRLiBeSeWfw","global"),Object.defineProperty(n,"__esModule",{value:!0}),n.gameName="5b7248e6372375b7248edb0de65b7248f69c5495b7248fe718m5d5b72490319047",n.chName="GM";var o="https://tiny.qimiaosenlin.com/";n._cdn2=o+"cdn/",n.webRoot=n._cdn2+n.gameName+"/web/",n.gameRoot=o+n.gameName+"/",n.cdn="https://cdn-tiny.qimiaosenlin.com/cdn/";var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function r(t){if(t.op)return e=(e=n.gameRoot+t.op+".php").replace(/\w+\/\.\.\//,""),delete t.op,e;if(t.url){var e=t.url;return delete t.url,e}return console.error("\u6728\u6709 op \u6216 url"),""}function a(t,e,n,o){if("string"==typeof n)try{n=JSON.parse(n)}catch(t){console.error("\u89e3\u6790\u5931\u8d25\uff1a"+n+"\nurl="+e),n=null}o&&o(n)}n.get=function(t,e){var n=r(t);console.log("get "+n);var o=new XMLHttpRequest;o.open("GET",n,!0),o.responseType="text",o.onload=function(){o.response?(console.log("get "+n+" \u6210\u529f\uff01"),a(t,n,o.response,e)):console.error("get "+n+" \u5931\u8d25\uff01")},o.send()},n.post=function(t,e){var n=r(t);console.log("post "+n),$.post(n,t,function(o){o?(console.log("post "+n+" \u6210\u529f\uff01"),a(t,n,o,e)):console.error("post "+n+" \u5931\u8d25\uff01")})},n.getDrewCanvas=function(){if(document.getElementById("drewCanvas"));else{var t=document.createElement("canvas");document.body.appendChild(t),t.width=1024,t.height=1024,t.style.backgroundColor="#FF0000",t.id="drewCanvas"}return document.getElementById("drewCanvas")},n.myCRC32=function(t){for(var e=t.length,n=4294967295,o=0;o<e;o++)n=i[255&(n^t[o])]^n>>>8;return 4294967295^n},cc._RF.pop()},{}],prefabs:[function(t,e,n){"use strict";cc._RF.push(e,"52d42eR/Q1NT5dc4PoZroPH","prefabs"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t.names=new Array,t.s={},t.init=function(e){cc.loader.loadResDir("prefabs/",cc.Prefab,function(n,o){for(var i=0,r=o;i<r.length;i++){var a=r[i];t.s[a.data.name]?console.error("\u91cd\u590d\u540d\u5b57\u7684 prefab\uff1a"+a.data.name):(t.names.push(a.data.name),t.s[a.data.name]=a)}e&&e()})},t.has=function(e){return!!t.s[e]},t.instantiate=function(e){var n=t.s[e];return n?cc.instantiate(n):(console.error("\u6728\u6709Prefab\uff1a"+e),null)}}(n.prefabs||(n.prefabs={})),cc._RF.pop()},{}],removeStorage:[function(t,e,n){"use strict";cc._RF.push(e,"71c52x2ZRZI+JCJz5l/g6GG","removeStorage");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./global"),a=t("./Main"),s=cc._decorator,c=s.ccclass,h=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=this;console.log("init removeStorage"),this.time=this.node.getChildByName("time").getComponent(cc.Label),this.submit=this.node.getChildByName("submit"),this.input1=this.node.getChildByName("input1").getComponent(cc.EditBox),this.input2=this.node.getChildByName("input2").getComponent(cc.EditBox),this.submit.children[0].on(cc.Node.EventType.TOUCH_START,function(e){window.wx?(console.log("\u8c03\u53d6\u5fae\u4fe1\u63a5\u53e3"),wx.chooseImage({success:function(t){console.log("\u6210\u529f")},fail:function(t){console.log(t)}})):r.post({op:"removeStorage",game:a.main.chooseGameID,openId:t.openId},function(t){alert(t.message)})}),this.inputs=[this.input1,this.input2];for(var e=function(e){0;var n="";e.node.on("editing-did-began",function(t){n=e.string}),e.node.on("editing-did-ended",function(o){e.string!=n&&t.showSubmit()})},n=0,o=this.inputs;n<o.length;n++){e(o[n])}this.show()},e.prototype.showSubmit=function(){this.input1.string&&this.input2.string?(this.submit.children[1].active=!1,this.submit.children[0].active=!0,this.time.string="\u4fee\u6539\u4e8e\uff1a"+(new Date).toLocaleString(),this.openId=this.input2.string):(this.submit.children[1].active=!0,this.submit.children[0].active=!1,this.time.string="",this.openId="")},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.updata=function(){},e=i([c],e)}(cc.Component));n.default=h,cc._RF.pop()},{"./Main":"Main","./global":"global"}]},{},["CPAPage","CPAShow","CPBAPI","ChooseBox","ChooseGame","CodeShow","ConfigPage","GMPage","Main","Settings","SharePage","ShareShow","global","prefabs","removeStorage"]);